{% extends "base.html" %}


{% block main_page %} Вернуться на главную страницу {% endblock %}

{% block stories_list %} Вернуться к списку рассказов {% endblock %}

{% block title %} {{story.story_title}} {% endblock %}

{% block content %}

    <blockquote class="blockquote">
      <h2> {{ story.story_title }} </h2>
      {% with comments.count as total_comments %}
        <footer class="blockquote-footer"> Просмотров: {{ views.count }}. Всего комментариев: {{ total_comments }}.</footer>
      {% endwith %}
    </blockquote>

    <p>{{story.story_text}}</p>


    <hr>
    <h2> Комментарии: </h2>
    <br>
        {% if comments %}
            {% for comment in comments_on_page %}
                    <div class="card w-50 my-2">
                        <div class="card-header">
                            <h5 class="card-title">{{ comment.authors_name }}</h5>
                        </div>
                        <div class="card-body">
                            <p class="card-text">{{ comment.comment_text }}</p>
                        </div>
                        <div class="card-footer text-muted">
                            {{ comment.publication_date }}
                        </div>
                    </div>
            {% endfor %}

        {% else %}
            К этому рассказу пока нет комментариев.
        {% endif %}
    <hr>

    <form action="{% url 'stories:leave_comment' story.id %}" method="POST">
        {% csrf_token %}
        <input type="text" required="" placeholder="Ваше имя" name="comment_author_name"><br>
        <textarea required="" placeholder="Текст комментария" name="comment_text" cols="40" rows="5"></textarea><br>
        <button class="btn btn-dark">Оставить комментарий</button>
    </form>

    {% include "pagination.html" with page=comments_on_page %}

{% endblock %}
